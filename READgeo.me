import tweepy
from geopy.geocoders import Nominatim

# Ù…ÙØ§ØªÙŠØ­ API Ù…Ù† Ø¨ÙˆØ§Ø¨Ø© ØªÙˆÙŠØªØ± Ù„Ù„Ù…Ø·ÙˆØ±ÙŠÙ†
consumer_key = "Ø¶Ø¹_Ù‡Ù†Ø§"
consumer_secret = "Ø¶Ø¹_Ù‡Ù†Ø§"
access_token = "Ø¶Ø¹_Ù‡Ù†Ø§"
access_token_secret = "Ø¶Ø¹_Ù‡Ù†Ø§"

# Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
auth = tweepy.OAuth1UserHandler(consumer_key, consumer_secret, access_token, access_token_secret)
api = tweepy.API(auth)

# Ø§Ù„Ù…Ø¯Ù† Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø©
cities = ["Ø§Ù„Ø±ÙŠØ§Ø¶", "Ø¬Ø¯Ø©", "Ù…ÙƒØ©", "Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©", "Ø§Ù„Ø¯Ù…Ø§Ù…", "Ø£Ø¨Ù‡Ø§", "Ù†Ø¬Ø±Ø§Ù†", "Ø§Ù„Ù‚ØµÙŠÙ…", "Ø§Ù„Ø®Ø¨Ø±", "Ø­Ø§Ø¦Ù„", "Ø§Ù„Ø·Ø§Ø¦Ù", "ØªØ¨ÙˆÙƒ"]

# Ø£Ø¯Ø§Ø© ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹
geolocator = Nominatim(user_agent="geoFinderBot")

# Ø³Ø­Ø¨ Ø§Ù„ØªØºØ±ÙŠØ¯Ø§Øª
def get_tweets(username, count=100):
    tweets = api.user_timeline(screen_name=username, count=count, tweet_mode='extended')
    return [tweet.full_text for tweet in tweets]

# Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ù…ÙˆÙ‚Ø¹
def extract_location(tweet_text):
    for city in cities:
        if city in tweet_text:
            location = geolocator.geocode(city + ", Saudi Arabia")
            if location:
                return (city, location.latitude, location.longitude)
    return None

# Ø¯Ù…Ø¬ ÙƒØ§Ù…Ù„
def analyze_user_location(username):
    tweets = get_tweets(username)
    for tweet in tweets:
        location = extract_location(tweet)
        if location:
            print(f"ğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø­ØªÙ…Ù„: {location[0]}")
            print(f"ğŸ“Œ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª: {location[1]}, {location[2]}")
            return
    print("âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…ÙˆÙ‚Ø¹ Ø¶Ù…Ù† Ø§Ù„ØªØºØ±ÙŠØ¯Ø§Øª.")

# Ù…Ø«Ø§Ù„ ØªØ´ØºÙŠÙ„
analyze_user_location("Ø§Ø³Ù…_Ø§Ù„Ø­Ø³Ø§Ø¨")
